name: Keep Hugging Face Space Alive with Alert

on:
  schedule:
    # Ch·∫°y m·ªói 30 ph√∫t
    - cron: "*/30 * * * *"
  workflow_dispatch: # Ch·∫°y th·ªß c√¥ng n·∫øu c·∫ßn

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Hugging Face Space
        run: |
          SPACE_URL="https://kawaiicassie-n8n.hf.space"
          RESPONSE=$(curl -s -o /dev/null -w "%{http_code}" "$SPACE_URL" || echo "000")

          echo "HTTP Status: $RESPONSE"

          if [ "$RESPONSE" != "200" ]; then
            MESSAGE="üö® Hugging Face Space c√≥ th·ªÉ ƒëang ng·ªß ho·∫∑c l·ªói! M√£ tr·∫£ v·ªÅ: $RESPONSE"
            curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
              -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
              -d text="$MESSAGE"
          else
            echo "‚úÖ Space ƒëang ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng."
          fi
